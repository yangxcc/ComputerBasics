### 什么是sql注入

SQL注入即是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾处添加额外的sql语句，在管理员不知情的情况下实现非法操作。

一个sql注入的例子

```sql
SELECT * FROM user WHERE username='${username}' AND password='${password}';
```

在这个例子中攻击者可以在`username`和`password`输入框中注入恶意的sql代码，比如`OR 1=1`，从而使查询语句变成：

```sql
SELECT * FROM user WHERE username='' OR 1=1 AND password='' OR 1=1;
```

这样，攻击者就能够绕开身份验证，访问未授权的数据等

为了防止sql注入，开发人员应该使用**参数化查询**和**预编译语句**，这些方法可以防止恶意用户注入恶意sql代码，同时还可以提高查询效率

- 参数化查询是将sql查询语句中的参数用占位符替换（通常是问号），然后将参数值单独传递给数据库执行查询

- 预编译语句在执行之前会将查询语句发送到数据库进行预编译，这个过程会对sql语句进行语法分析和优化，以及生成执行计划。在预编译过程中，输入参数会被视为参数，而不是sql语句的一部分，因此预编译语句不会将输入参数视为可执行的SQL代码

其实从本质上来说，sql注入就是通过拼接sql语句的形式，来让数据库直接执行构造出来的恶意sql，而避免sql注入其实本质上也就是阻止sql拼接





### XSS

跨站脚本（Cross-site scripting，简称为：CSS, 但这会与层叠样式表（Cascading Style Sheets，CSS）的缩写混淆。因此，**跨站脚本攻击缩写为XSS**）是一种网站应用程序的安全漏洞攻击。

XSS攻击通常指的是通过利用网页开发时留下的漏洞，通过巧妙的方法注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。这些恶意网页程序通常是JavaScript，但实际上也可以包括Java、 VBScript、 LiveScript、ActiveX、 Flash 或者甚至是普通的HTML。攻击成功后，攻击者可能得到包括但不限于更高的权限（如执行一些操作）、私密网页内容、会话和cookie等各种内容。

**反射型XSS：**

反射型XSS攻击是指攻击者将恶意脚本代码注入到网页中的URL参数中，当用户点击包含该参数的链接或提交包含该参数的表单时，恶意脚本代码会被执行。这种攻击方式主要依赖于用户的交互行为。

**存储型XSS：**

存储型XSS攻击是指攻击者将恶意脚本代码存储在服务器上，当用户访问包含该恶意脚本代码的网页时，恶意脚本会被执行。这种攻击方式不依赖于用户的交互行为，攻击者可以通过篡改网站数据来实施攻击。

**DOM-based XSS：**

通过修改页面的DOM节点形成的XSS，称之为DOM Based XSS

> DOM节点是指文档对象模型中的节点，他们是HTML或XML文档中的元素、属性、文本等的抽象表示，DOM节点将整个文档分解为一个树形结构，每个节点都有不同的类型、名称、值和属性，它们可以被操作和访问，从而实现对文档的修改和控制。



XSS攻击有两大要素：一是攻击者提供恶意代码；二是浏览器执行恶意代码

所以防范XSS不仅仅只是服务端的任务，是需要后端和前端共同参与的工程，虽然很难通过技术手段完全避免XSS，但我们原则是是减少漏洞的产生。





### CSRF

CSRF（Cross-Site Request Forgery）的全称是“**跨站请求伪造**”，也被称为"One Click Attack"或者"Session Riding"，通常缩写为CSRF或者XSRF，看起来和跨站脚本攻击（XSS）很像，但它与XSS非常不同，并且攻击方式几乎相左，XSS是利用站点内的信任用户，而CSRF则通过伪装来自受信任用户的请求来攻击受信任的网站，与XSS相比，CSRF攻击往往不太流行，因此对其防范的资源也相当稀少和难以防范，所以被认为是比XSS更具危险性。

**CSRF攻击其实是利用了web中用户身份认证验证的一个漏洞：简单的身份验证仅仅能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的。**	

想要达成CSRF攻击必须满足两个基本条件：

- 登录受信任的站点A，并在本地生成Cookie
- 在不登出A的情况下，访问危险站点B











